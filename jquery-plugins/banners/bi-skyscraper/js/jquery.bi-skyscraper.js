/** * jquery插件：对联广告 * create date: 2010-07-20 * @requires jQuery v1.4.2+ * @author Nicolas */(function($){	var mode = document.documentMode || 0;	var ie6 = $.browser.msie && /MSIE 6.0/.test(navigator.userAgent) && !mode;		$.fn.biSkyscraper = function(o){		o = $.extend({			// top, bottom			direction: "top",			distanceX: 10,			distanceY: 10,			// z-index			z: 999,			// 自动关闭广告			autoOff: true,			// 广告持续时间			duration: 5000,			// 重播广告			restart: true,			// 点击关闭后，如果需要重播，广告位的最小显示宽度			minWidth: 12,			// 颠倒左右广告位			reverse: false,			// 页面主内容区容器			container: null,			// 点击关闭后，如果需要重播时的替换内容			replaceHTML: null		}, o);				return this.each(function(){			var dl = $(this);			if (o.reverse && $("dd", dl).size() == 2) {				$("dd:eq(0)", dl).insertAfter($("dd:eq(1)", dl));			}			var dd = $("dd", dl), left = $("dd:eq(0)", dl), right = $("dd:eq(1)", dl), btn = $(".button", dl), maxWidth = dd.width();			dd.css({				"position": ie6 ? "absolute" : "fixed",				"z-index": o.z			});			pos();			dd.show();						var f = true, t;						var html = [];
			dd.each(function(i){
				html[i] = $(this).find(".banner").html();
			});						if (o.autoOff && o.duration) {				if (o.restart) {					t = setTimeout(restart, o.duration);				}				else {					dd.delay(o.duration).fadeOut("fast");				}			}						btn.bind("click", function(){				if (o.restart) {					clearTimeout(t);					restart();					if (o.autoOff && o.duration && f) {						t = setTimeout(restart, o.duration);					}				}				else {					dd.fadeOut("fast");				}				return false;			});						$(window).bind("resize scroll", function(){				pos();			});						function getDistanceX(){				var x, w = dd.width() + o.distanceX;				if ($(o.container).length) {					x = ($(window).width() - $(o.container).width()) / 2;					if (x <= w) {						return 0;					}					else {						return x - w;					}				}				else {					return o.distanceX;				}			}						function pos(){				var distanceX = getDistanceX();				if (ie6) {					dd.css("top", $(window).scrollTop() + (o.direction == "top" ? +o.distanceY : $(window).height() - dd.height() - o.distanceY));					left.css("left", $(window).scrollLeft() + distanceX);					right.css("left", $(window).scrollLeft() + $(window).width() - dd.width() - distanceX);				}				else {					dd.css(o.direction, o.distanceY);					left.css("left", distanceX);					right.css("right", distanceX);				}			}						function restart(){				var text = left.text(), width = dd.width();				btn.text(f ? "重播" : "关闭");				dd.width(f ? o.minWidth : maxWidth);				
				if (o.replaceHTML) {
					dd.each(function(i){
						$(this).find(".banner").html(f ? $(o.replaceHTML).html() : html[i]);
					});
				}								pos();				f = !f;			}		});	};})(jQuery);